- name: "[darwin] Git Submodule Update"
  ansible.builtin.git:
    repo: git@github.com:jonasdiemer/EurKEY-Mac.git
    dest: macos
    recursive: yes
    update: yes
    version: master
  tags: eurkey

- name: "[darwin] Copy EurKEY files to /Library/Keyboard Layouts"
  ansible.builtin.file:
    src: "{{ item }}"
    dest: /Library/Keyboard Layouts
    state: link
  loop:
    - macos/EurKEY.keylayout
    - macos/EurKEY.icns
  tags: eurkey
